[gd_scene load_steps=17 format=3 uid="uid://bppmj5dmnvlko"]

[ext_resource type="PackedScene" uid="uid://b25jkvemaipnk" path="res://scenes/UI/CanvasLayer_PostProcessing.tscn" id="1_65ejx"]
[ext_resource type="Environment" uid="uid://crvgdsl4qcv1t" path="res://resources/Environments/env_test.tres" id="1_x61il"]
[ext_resource type="PackedScene" uid="uid://v2urofrh3pq5" path="res://scenes/Entities/GameController.tscn" id="2_2ykvt"]
[ext_resource type="Material" uid="uid://bg2bjdrabdhn5" path="res://resources/Shaders/SM_Posterization.tres" id="2_i1dou"]
[ext_resource type="PackedScene" uid="uid://c2uxpo5fna1nn" path="res://scenes/Entities/CamPosNode.tscn" id="3_71sqw"]
[ext_resource type="Script" path="res://scripts/world_environment.gd" id="3_t8fsm"]
[ext_resource type="PackedScene" uid="uid://bsgqiciuvs6ok" path="res://scenes/Levels/PilotSeat.tscn" id="4_e5ioo"]
[ext_resource type="Script" uid="uid://b8260neigo27n" path="res://scripts/ClickableObject.gd" id="6_hx85v"]
[ext_resource type="PackedScene" uid="uid://dl5x0m77shd62" path="res://scenes/UI/ui_message_display.tscn" id="8_sou27"]
[ext_resource type="PackedScene" uid="uid://b3728ytvs6bn0" path="res://scenes/UI/ui_map_display.tscn" id="9_v4ldq"]
[ext_resource type="PackedScene" uid="uid://cgvgni8obca17" path="res://scenes/Levels/TestMapNode.tscn" id="11_hx85v"]

[sub_resource type="ViewportTexture" id="ViewportTexture_xqkv0"]
viewport_path = NodePath("Entities/SubViewport")

[sub_resource type="ViewportTexture" id="ViewportTexture_sou27"]
viewport_path = NodePath("Entities/SubViewport2")

[sub_resource type="ViewportTexture" id="ViewportTexture_v4ldq"]
viewport_path = NodePath("Entities/SubViewport3")

[sub_resource type="BoxShape3D" id="BoxShape3D_2ykvt"]

[sub_resource type="BoxMesh" id="BoxMesh_65ejx"]

[node name="Dev_Level" type="Node3D"]

[node name="CanvasLayerPostProcessing2" parent="." instance=ExtResource("1_65ejx")]

[node name="ColorRect" parent="CanvasLayerPostProcessing2" index="0"]
material = ExtResource("2_i1dou")

[node name="PilotSeat" parent="." instance=ExtResource("4_e5ioo")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8, -7, 14.5)

[node name="MainScreen" type="Sprite3D" parent="PilotSeat"]
transform = Transform3D(4.92883e-09, 0, -0.0253141, 0, 0.0253141, 0, 0.0253141, 0, 4.92883e-09, -0.0932883, 2.40874, 1.23992)
texture = SubResource("ViewportTexture_xqkv0")

[node name="UpperSmallScreen" type="Sprite3D" parent="PilotSeat"]
transform = Transform3D(0.00551308, 0, -0.0118228, 0, 0.0130451, 0, 0.0118228, 0, 0.00551308, -0.154454, 2.3477, 0.948218)
double_sided = false
texture = SubResource("ViewportTexture_sou27")

[node name="LowerSmallScreen" type="Sprite3D" parent="PilotSeat"]
transform = Transform3D(0.00551308, 0, -0.0118228, 0, 0.0130451, 0, 0.0118228, 0, 0.00551308, -0.154231, 2.16265, 0.94521)
double_sided = false
texture = SubResource("ViewportTexture_v4ldq")

[node name="PlayerCamera3D" type="Camera3D" parent="PilotSeat"]
transform = Transform3D(0.173648, 0, -0.984808, 0, 1, 0, 0.984808, 0, 0.173648, -0.808575, 2.31077, 1.32187)
current = true
fov = 50.1

[node name="SpotLight3D" type="SpotLight3D" parent="PilotSeat"]
transform = Transform3D(0.997139, -2.83972e-09, 0.0755879, -0.0752526, -0.0940736, 0.992717, 0.00711082, -0.995565, -0.0938045, -0.639279, 3.65025, 1.06233)
light_color = Color(0.58928, 0.59888, 0.458443, 1)
light_energy = 0.5
light_bake_mode = 1
spot_range = 5.8321
spot_angle = 37.8641

[node name="OmniLight3D" type="OmniLight3D" parent="PilotSeat"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.188677, 2.4133, 1.24219)
light_color = Color(0.710422, 0.533057, 0.275189, 1)
light_energy = 0.025
light_volumetric_fog_energy = 0.0
omni_range = 0.328865

[node name="OmniLight3D2" type="OmniLight3D" parent="PilotSeat"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.194292, 2.32221, 0.954331)
light_color = Color(0.32178, 0.298488, 0.236073, 1)
light_energy = 0.025
light_volumetric_fog_energy = 0.0
omni_range = 0.328865

[node name="OmniLight3D3" type="OmniLight3D" parent="PilotSeat"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.173542, 2.13815, 0.975772)
light_color = Color(0.32178, 0.298488, 0.236073, 1)
light_energy = 0.025
light_volumetric_fog_energy = 0.0
omni_range = 0.328865

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource("1_x61il")
script = ExtResource("3_t8fsm")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="WorldEnvironment"]
transform = Transform3D(0.866025, -0.25, -0.433013, 0.5, 0.433013, 0.75, 0, -0.866025, 0.5, 1.90681, 6.2019, -2.95414)
light_color = Color(0.736992, 0.501011, 0.205053, 1)
light_energy = 0.1
light_volumetric_fog_energy = 0.0
light_cull_mask = 4294967293
shadow_enabled = true
shadow_blur = 10.0
directional_shadow_mode = 1

[node name="GameController" parent="." node_paths=PackedStringArray("cam", "ScreenViewport") instance=ExtResource("2_2ykvt")]
cam = NodePath("../PilotSeat/PlayerCamera3D")
turnSpeed = 0.15
ScreenViewport = NodePath("../Entities/SubViewport")

[node name="Entities" type="Node3D" parent="."]

[node name="SubViewport" type="SubViewport" parent="Entities"]
size = Vector2i(1280, 960)

[node name="CanvasLayerPostProcessing" parent="Entities/SubViewport" instance=ExtResource("1_65ejx")]

[node name="CameraNode1" parent="Entities/SubViewport" instance=ExtResource("3_71sqw")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.52371, 1.16639, 6.94119)
is_active_cam = true

[node name="Camera3D" type="Camera3D" parent="Entities/SubViewport/CameraNode1"]

[node name="CameraNode2" parent="Entities/SubViewport" instance=ExtResource("3_71sqw")]
transform = Transform3D(-0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, -0.707107, 2.47652, 0.92824, -0.201287)

[node name="Camera3D" type="Camera3D" parent="Entities/SubViewport/CameraNode2"]

[node name="SubViewport2" type="SubViewport" parent="Entities"]
size = Vector2i(1280, 960)

[node name="ui_msgDisplay" parent="Entities/SubViewport2" instance=ExtResource("8_sou27")]

[node name="SubViewport3" type="SubViewport" parent="Entities"]
size = Vector2i(1280, 960)

[node name="ui_mapDisplay" parent="Entities/SubViewport3" instance=ExtResource("9_v4ldq")]

[node name="TestInteractableObject" type="StaticBody3D" parent="Entities" node_paths=PackedStringArray("trigger_on_interact")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.41271, 1.101, -1.54066)
script = ExtResource("6_hx85v")
object_name = "Test Obj 1"
is_interactable = true
trigger_on_interact = [NodePath("../SubViewport/CameraNode2")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Entities/TestInteractableObject"]
shape = SubResource("BoxShape3D_2ykvt")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Entities/TestInteractableObject"]
mesh = SubResource("BoxMesh_65ejx")
skeleton = NodePath("../../../Rooms")

[node name="TestInteractableObject2" type="StaticBody3D" parent="Entities" node_paths=PackedStringArray("trigger_on_interact")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.81031, 1.63403, 7.0518)
script = ExtResource("6_hx85v")
object_name = "Test Obj 2"
is_interactable = true
trigger_on_interact = [NodePath("../SubViewport/CameraNode1")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Entities/TestInteractableObject2"]
shape = SubResource("BoxShape3D_2ykvt")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Entities/TestInteractableObject2"]
mesh = SubResource("BoxMesh_65ejx")
skeleton = NodePath("../../../Rooms")

[node name="Rooms" type="Node3D" parent="."]

[node name="TestMapNode" parent="Rooms" instance=ExtResource("11_hx85v")]

[node name="TestMapNode2" parent="Rooms" instance=ExtResource("11_hx85v")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -20, 0, 0)

[editable path="CanvasLayerPostProcessing2"]
[editable path="Entities/SubViewport/CanvasLayerPostProcessing"]
